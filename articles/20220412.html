<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Use Caddy to build a lightweight web server | Go Back As Wind</title><meta name="author" content="Kincaid"><meta name="copyright" content="Kincaid"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="I wanted to write this article for a long time, but I never had the opportunity. I took this opportunity to write by the way. The system image of this article is Debian 11.1. Please do not refer to t">
<meta property="og:type" content="article">
<meta property="og:title" content="Use Caddy to build a lightweight web server">
<meta property="og:url" content="https://r2wind.com/articles/20220412.html">
<meta property="og:site_name" content="Go Back As Wind">
<meta property="og:description" content="I wanted to write this article for a long time, but I never had the opportunity. I took this opportunity to write by the way. The system image of this article is Debian 11.1. Please do not refer to t">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://resources.r2wind.com/img/202204/grass-5212125_1920.jpg">
<meta property="article:published_time" content="2022-04-12T04:41:53.000Z">
<meta property="article:modified_time" content="2023-01-19T13:11:46.905Z">
<meta property="article:author" content="Kincaid">
<meta property="article:tag" content="Caddy">
<meta property="article:tag" content="WebServer">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://resources.r2wind.com/img/202204/grass-5212125_1920.jpg"><link rel="shortcut icon" href="https://resources.r2wind.com/img/logo.ico"><link rel="canonical" href="https://r2wind.com/articles/20220412.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><meta/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://mirrors.r2wind.com/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://mirrors.r2wind.com/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-V01X98EDSJ"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-V01X98EDSJ');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Use Caddy to build a lightweight web server',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-01-19 21:11:46'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://fonts.r2wind.com/fonts.css"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Go Back As Wind" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://resources.r2wind.com/img/background.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">9</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/Gallery"><i class="fa-fw fa fa-image"></i><span> Gallery</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-language"></i><span> Language</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://r2wind.cn"><span> 简体中文</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://yjz.hk"><span> 繁體中文</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Go Back As Wind"><span class="site-name">Go Back As Wind</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/Gallery"><i class="fa-fw fa fa-image"></i><span> Gallery</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-language"></i><span> Language</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://r2wind.cn"><span> 简体中文</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://yjz.hk"><span> 繁體中文</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Use Caddy to build a lightweight web server</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-04-12T04:41:53.000Z" title="Created 2022-04-12 12:41:53">2022-04-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-01-19T13:11:46.905Z" title="Updated 2023-01-19 21:11:46">2023-01-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Tutorials/">Tutorials</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>6min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Use Caddy to build a lightweight web server"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><blockquote>
<p>I wanted to write this article for a long time, but I never had the opportunity. I took this opportunity to write by the way. The system image of this article is Debian 11.1. Please do not refer to this tutorial for other system environments (PS: especially for newbies~)</p>
</blockquote>
<h2 id="About-Caddy"><a href="#About-Caddy" class="headerlink" title="About Caddy"></a>About Caddy</h2><p>A simple, lightweight, and novice-friendly web server that can even automatically deploy SSL certificates for you, making it relatively friendly for novice users.</p>
<blockquote>
<p>PS:But I don’t use it anymore. The current version of Caddy has some problems with HTTP&#x2F;3 support, so I use Nginx-quic now, and I will write another tutorial someday~</p>
</blockquote>
<h2 id="Install-Caddy"><a href="#Install-Caddy" class="headerlink" title="Install Caddy"></a>Install Caddy</h2><h3 id="Configuring-Software-Sources"><a href="#Configuring-Software-Sources" class="headerlink" title="Configuring Software Sources"></a>Configuring Software Sources</h3><p>Install required dependencies：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install -y debian-keyring debian-archive-keyring apt-transport-https</span><br></pre></td></tr></table></figure>
<p>Installation key and mirror source：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -1sLf &#x27;https://dl.cloudsmith.io/public/caddy/stable/gpg.key&#x27; | sudo tee /etc/apt/trusted.gpg.d/caddy-stable.asc</span><br><span class="line">curl -1sLf &#x27;https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt&#x27; | sudo tee /etc/apt/sources.list.d/caddy-stable.list</span><br></pre></td></tr></table></figure>
<p>Finally, update the software source and install Caddy:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install caddy</span><br></pre></td></tr></table></figure>
<p>When you see the following prompt, you are done：<br><img src="https://resources.r2wind.com/img/202204/20220412140018.png" alt="安装完成"></p>
<h2 id="Configure-Caddy"><a href="#Configure-Caddy" class="headerlink" title="Configure Caddy"></a>Configure Caddy</h2><h3 id="Create-website-and-certificate-directory"><a href="#Create-website-and-certificate-directory" class="headerlink" title="Create website and certificate directory"></a>Create website and certificate directory</h3><h4 id="Create-a-certificate-directory"><a href="#Create-a-certificate-directory" class="headerlink" title="Create a certificate directory"></a>Create a certificate directory</h4><p>In fact, Caddy can automatically apply for a certificate, but if you want to use your own certificate, you need to create a folder to put the certificate~</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/ssl</span><br><span class="line">mkdir caddy</span><br></pre></td></tr></table></figure>
<h4 id="Create-a-website-directory"><a href="#Create-a-website-directory" class="headerlink" title="Create a website directory"></a>Create a website directory</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /</span><br><span class="line">mkdir www</span><br><span class="line">cd www</span><br><span class="line">mkdir wwwroot</span><br><span class="line">mkdir log</span><br></pre></td></tr></table></figure>
<p>Among them, wwwroot is used to place the root directory of the website, and log is used to store website logs.</p>
<h4 id="Grant-permissions"><a href="#Grant-permissions" class="headerlink" title="Grant permissions"></a>Grant permissions</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chown -R www-data:root /www</span><br><span class="line">sudo chmod 0777 /www/log</span><br></pre></td></tr></table></figure>
<h3 id="Edit-the-Caddy-configuration-file"><a href="#Edit-the-Caddy-configuration-file" class="headerlink" title="Edit the Caddy configuration file"></a>Edit the Caddy configuration file</h3><p>Caddy’s configuration file, Caddyfile, is in &#x2F;etc&#x2F;caddy. It can be downloaded and edited and then uploaded or edited directly with vim. Depending on personal preference, the left side of the Mobaxterm software is actually a file browser, where you can browse and edit files,Upload and download, the following is a sample file, please refer to <a target="_blank" rel="noopener" href="https://caddyserver.com/docs/getting-started">official document</a> for more usage methods:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">// The configuration here is used to support HTTP3, if you don&#x27;t need to delete it</span><br><span class="line">&#123;</span><br><span class="line">	servers &#123;</span><br><span class="line">		protocol &#123;</span><br><span class="line">			experimental_http3</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">// A common website example, replace r2wind.com with your own domain name</span><br><span class="line">r2wind.com &#123;</span><br><span class="line">  // Configure the website root directory here, please upload the page file to the website root directory</span><br><span class="line">	root * /www/wwwroot/r2wind.com/public</span><br><span class="line">  // Configure the SSL certificate path. If you don&#x27;t configure it, Caddy will automatically apply and match it for you.</span><br><span class="line">	tls /etc/ssl/caddy/r2wind.cn.crt /etc/ssl/caddy/r2wind.cn.key</span><br><span class="line">  // Customize the error page file, if you don&#x27;t need to delete it</span><br><span class="line">	handle_errors &#123;</span><br><span class="line">		rewrite * /&#123;http.error.status_code&#125;.html</span><br><span class="line">		file_server</span><br><span class="line">	&#125;</span><br><span class="line">  // The log storage path, if you do not need to save the access log, you can delete it</span><br><span class="line">	log &#123;</span><br><span class="line">		output file /www/log/r2wind_com.log</span><br><span class="line">	&#125;</span><br><span class="line">  // Enable Gzip compression, delete it if you don&#x27;t need it</span><br><span class="line">	encode gzip</span><br><span class="line">	file_server</span><br><span class="line">  // used to add response headers</span><br><span class="line">	header &#123;</span><br><span class="line">    // Disables the client&#x27;s MIME type sniffing behavior, remove it if you don&#x27;t need it</span><br><span class="line">		X-content-type-tptions nosniff</span><br><span class="line">    // Refuse to embed other websites, please delete if not needed</span><br><span class="line">		X-frame-options DENY</span><br><span class="line">    // HSTS response header, delete if not needed</span><br><span class="line">		Strict-Transport-Security max-age=63072000;includeSubDomains;preload</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">// A sample reverse proxy configuration</span><br><span class="line">yjz.hk &#123;</span><br><span class="line">  // Specify the proxy webpage access addresshttps://xx.r2w.dev</span><br><span class="line">	reverse_proxy https://xx.r2w.dev &#123;</span><br><span class="line">    // Specify the request domain name:hk.r2w.dev</span><br><span class="line">		header_up Host &#123;hk.r2w.dev&#125;</span><br><span class="line">	&#125;</span><br><span class="line">  // The following configuration has been introduced above, and will not be repeated here.</span><br><span class="line">	tls /etc/ssl/caddy/r2wind.cn.crt /etc/ssl/caddy/r2wind.cn.key</span><br><span class="line">	handle_errors &#123;</span><br><span class="line">		rewrite * /&#123;http.error.status_code&#125;.html</span><br><span class="line">		file_server</span><br><span class="line">	&#125;</span><br><span class="line">	log &#123;</span><br><span class="line">		output file /www/log/yjz_hk.log</span><br><span class="line">	&#125;</span><br><span class="line">	encode gzip</span><br><span class="line">	file_server</span><br><span class="line">	header &#123;</span><br><span class="line">		X-content-type-tptions nosniff</span><br><span class="line">		x-xss-protection: 1; mode=block</span><br><span class="line">		Strict-Transport-Security max-age=63072000;includeSubDomains;preload</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">// A redirect example configuration</span><br><span class="line">www.yjz.hk &#123;</span><br><span class="line">  // Specify the redirected website address and carry relevant parameters</span><br><span class="line">	redir https://yjz.hk&#123;uri&#125;</span><br><span class="line">&#125;</span><br><span class="line">// A multi-domain redirection example configuration, remember to separate multiple domain names with &quot;,&quot;, remember to enter a space after the comma and then enter the domain name</span><br><span class="line">dnstest.cc, www.dnstest.cc, r2wind.net, www.r2wind.net &#123;</span><br><span class="line">	redir https://r2wind.cn</span><br><span class="line">&#125;</span><br><span class="line">// An example configuration of a multi-domain website is the same as that of a normal website, but with a few more domain names</span><br><span class="line">r2wind.com，r2wind.net, r2wind.cn &#123;</span><br><span class="line">  // Configure the website root directory here, please upload the page file to the website root directory</span><br><span class="line">	root * /www/wwwroot/r2wind.com/public</span><br><span class="line">  // Configure the SSL certificate path. If you do not configure it, Caddy will automatically apply and match it for you. Note: It is best not to specify an SSL certificate here, unless your certificate has multiple domain names.</span><br><span class="line">	tls /etc/ssl/caddy/r2wind.cn.crt /etc/ssl/caddy/r2wind.cn.key</span><br><span class="line">  // Customize the error page file, if you don&#x27;t need to delete it</span><br><span class="line">	handle_errors &#123;</span><br><span class="line">		rewrite * /&#123;http.error.status_code&#125;.html</span><br><span class="line">		file_server</span><br><span class="line">	&#125;</span><br><span class="line">  // The log storage path, if you do not need to save the access log, you can delete it</span><br><span class="line">	log &#123;</span><br><span class="line">		output file /www/log/r2wind_com.log</span><br><span class="line">	&#125;</span><br><span class="line">  // Enable Gzip compression, delete it if you don&#x27;t need it</span><br><span class="line">	encode gzip</span><br><span class="line">	file_server</span><br><span class="line">  // used to add response headers</span><br><span class="line">	header &#123;</span><br><span class="line">    // Disables the client&#x27;s MIME type sniffing behavior, remove it if you don&#x27;t need it</span><br><span class="line">		X-content-type-tptions nosniff</span><br><span class="line">    // Refuse to embed other websites, please delete if not needed</span><br><span class="line">		X-frame-options DENY</span><br><span class="line">    // HSTS response header, delete if not needed</span><br><span class="line">		Strict-Transport-Security max-age=63072000;includeSubDomains;preload</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Reload-the-configuration-file"><a href="#Reload-the-configuration-file" class="headerlink" title="Reload the configuration file"></a>Reload the configuration file</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl reload caddy</span><br></pre></td></tr></table></figure>
<p>If the configuration is correct, no prompt will appear after pressing Enter</p>
<h3 id="Effect-display"><a href="#Effect-display" class="headerlink" title="Effect display"></a>Effect display</h3><p>The effect will not be shown here. Just upload the website file to the root directory of the website, modify the configuration file and reload Caddy, and then configure the domain name resolution to access the corresponding domain name.</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://r2wind.com">Kincaid</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://r2wind.com/articles/20220412.html">https://r2wind.com/articles/20220412.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Caddy/">Caddy</a><a class="post-meta__tags" href="/tags/WebServer/">WebServer</a></div><div class="post_share"><div class="social-share" data-image="https://resources.r2wind.com/img/202204/grass-5212125_1920.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://mirrors.r2wind.com/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://mirrors.r2wind.com/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/articles/20220416.html" title="AS205794"><img class="cover" src="https://resources.r2wind.com/img/202204/flowers-7050948_1920.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">AS205794</div></div></a></div><div class="next-post pull-right"><a href="/articles/20220328.html" title="The solution to the prompt &quot;One or more intermediate certificates in the certificate chain are missing&quot; when Tencent Cloud free SSL certificate is deployed in IIS"><img class="cover" src="https://resources.r2wind.com/img/202203/ocean-6530523_1280.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">The solution to the prompt &quot;One or more intermediate certificates in the certificate chain are missing&quot; when Tencent Cloud free SSL certificate is deployed in IIS</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://resources.r2wind.com/img/background.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Kincaid</div><div class="author-info__description">A freelance Internet worker</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">9</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/KincaidYang" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:yjz@r2wind.org" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Welcome</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#About-Caddy"><span class="toc-number">1.</span> <span class="toc-text">About Caddy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Install-Caddy"><span class="toc-number">2.</span> <span class="toc-text">Install Caddy</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Configuring-Software-Sources"><span class="toc-number">2.1.</span> <span class="toc-text">Configuring Software Sources</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Configure-Caddy"><span class="toc-number">3.</span> <span class="toc-text">Configure Caddy</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-website-and-certificate-directory"><span class="toc-number">3.1.</span> <span class="toc-text">Create website and certificate directory</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Create-a-certificate-directory"><span class="toc-number">3.1.1.</span> <span class="toc-text">Create a certificate directory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Create-a-website-directory"><span class="toc-number">3.1.2.</span> <span class="toc-text">Create a website directory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Grant-permissions"><span class="toc-number">3.1.3.</span> <span class="toc-text">Grant permissions</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Edit-the-Caddy-configuration-file"><span class="toc-number">3.2.</span> <span class="toc-text">Edit the Caddy configuration file</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Reload-the-configuration-file"><span class="toc-number">3.3.</span> <span class="toc-text">Reload the configuration file</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Effect-display"><span class="toc-number">3.4.</span> <span class="toc-text">Effect display</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/articles/20220417.html" title="2022 &quot;ends&quot; early~"><img src="https://resources.r2wind.com/img/202204/sky-6811874_1920.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2022 &quot;ends&quot; early~"/></a><div class="content"><a class="title" href="/articles/20220417.html" title="2022 &quot;ends&quot; early~">2022 &quot;ends&quot; early~</a><time datetime="2022-04-17T15:14:22.000Z" title="Created 2022-04-17 23:14:22">2022-04-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/articles/20220416.html" title="AS205794"><img src="https://resources.r2wind.com/img/202204/flowers-7050948_1920.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AS205794"/></a><div class="content"><a class="title" href="/articles/20220416.html" title="AS205794">AS205794</a><time datetime="2022-04-16T12:57:49.000Z" title="Created 2022-04-16 20:57:49">2022-04-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/articles/20220412.html" title="Use Caddy to build a lightweight web server"><img src="https://resources.r2wind.com/img/202204/grass-5212125_1920.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Use Caddy to build a lightweight web server"/></a><div class="content"><a class="title" href="/articles/20220412.html" title="Use Caddy to build a lightweight web server">Use Caddy to build a lightweight web server</a><time datetime="2022-04-12T04:41:53.000Z" title="Created 2022-04-12 12:41:53">2022-04-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/articles/20220328.html" title="The solution to the prompt &quot;One or more intermediate certificates in the certificate chain are missing&quot; when Tencent Cloud free SSL certificate is deployed in IIS"><img src="https://resources.r2wind.com/img/202203/ocean-6530523_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="The solution to the prompt &quot;One or more intermediate certificates in the certificate chain are missing&quot; when Tencent Cloud free SSL certificate is deployed in IIS"/></a><div class="content"><a class="title" href="/articles/20220328.html" title="The solution to the prompt &quot;One or more intermediate certificates in the certificate chain are missing&quot; when Tencent Cloud free SSL certificate is deployed in IIS">The solution to the prompt &quot;One or more intermediate certificates in the certificate chain are missing&quot; when Tencent Cloud free SSL certificate is deployed in IIS</a><time datetime="2022-03-28T14:42:34.000Z" title="Created 2022-03-28 22:42:34">2022-03-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/articles/20220217.html" title="BuyVM Configure AnyCast IP"><img src="https://resources.r2wind.com/img/202202/feather-7009025_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BuyVM Configure AnyCast IP"/></a><div class="content"><a class="title" href="/articles/20220217.html" title="BuyVM Configure AnyCast IP">BuyVM Configure AnyCast IP</a><time datetime="2022-02-17T05:21:37.000Z" title="Created 2022-02-17 13:21:37">2022-02-17</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://resources.r2wind.com/img/background.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2017 - 2023 By Kincaid</div><div class="framework-info"><span>Power By </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme By </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a><span class="footer-separator">|</span><span>CoverImage By </span><a target="_blank" rel="noopener" href="https://pixabay.com/">Pixabay</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://mirrors.r2wind.com/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><canvas class="fireworks" mobile="false"></canvas><script src="https://mirrors.r2wind.com/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>